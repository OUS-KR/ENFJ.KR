<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ìš´ì„¸ - ENFJ</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <style>
        /* Custom styles are now handled by main.css through .info-card */
        .card-title .icon {
            display: inline-block;
            margin-right: 0.5em;
            font-style: normal;
        }
    </style>
</head>
<body>
    <header class="main-nav">
        <a href="/u/tests/" class="logo">ENFJ.KR Tests</a>
        <div class="nav-right-section">
            <nav class="nav-links" id="nav-links">
                <div class="nav-item dropdown">
                    <button class="dropdown-toggle">ì˜¤ëŠ˜ì˜ ì½˜í…ì¸ </button>
                    <div class="dropdown-menu">
                        <a href="/u/tests/today-fortune/">ì˜¤ëŠ˜ì˜ ìš´ì„¸</a>
                        <a href="/u/tests/today-game/">ì˜¤ëŠ˜ì˜ ê²Œì„</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <button class="dropdown-toggle">ì •ë³´</button>
                    <div class="dropdown-menu">
                        <a href="/u/tests/info-characteristics/">íŠ¹ì§•</a>
                        <a href="/u/tests/info-careers/">ì»¤ë¦¬ì–´</a>
                        <a href="/u/tests/info-cognitive-functions/">ì¸ì§€ê¸°ëŠ¥</a>
                        <a href="/u/tests/info-subtypes/">í•˜ìœ„ìœ í˜•</a>
                        <a href="/u/tests/info-relationships/">ì¸ê°„ê´€ê³„</a>
                        <a href="/u/tests/info-misconceptions/">í”í•œ ì˜¤í•´</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <button class="dropdown-toggle">í…ŒìŠ¤íŠ¸</button>
                    <div class="dropdown-menu">
                        <a href="/u/tests/test-logic-quiz/">ENFJ ê³µê° ëŠ¥ë ¥ í€´ì¦ˆ</a>
                        <a href="/u/tests/test-relationship-style/">ì—°ì•  ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸</a>
                        <a href="/u/tests/test-stress-triggers/">ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸</a>
                        <a href="/u/tests/test-brain-utilization/">ENFJ ë¦¬ë”ì‹­ ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸</a>
                        <a href="/u/tests/test-bingo/">ë¹™ê³  ì±Œë¦°ì§€</a>
                        <a href="/u/tests/test-empathy-quiz/">ENFJ ê°ˆë“± í•´ê²° í€´ì¦ˆ</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <button class="dropdown-toggle">ê²Œì„</button>
                    <div class="dropdown-menu">
                        <a href="/u/tests/game-logic-puzzle/">ENFJ í˜‘ë ¥ ê²Œì„</a>
                        <a href="/u/tests/game-strategy-simulation/">ENFJ ì‚¬íšŒì  ì „ëµ ì‹œë®¬ë ˆì´ì…˜</a>
                        <a href="/u/tests/game-code-decryption/">ENFJ ê°ì • í•´ë… ê²Œì„</a>
                        <a href="/u/tests/game-abstract-reasoning/">ENFJ ë¹„ì „ ê³µìœ  ê²Œì„</a>
                        <a href="/u/tests/game-travel-planner/">ENFJ íŒ€ ë¹Œë”© ì±Œë¦°ì§€</a>
                        <a href="/u/tests/game-maze-challenge/">ENFJ ê´€ê³„ ë¯¸ë¡œ íƒˆì¶œ</a>
                        <a href="/u/tests/game-code-breaker/">ENFJ ì†Œí†µ ì•”í˜¸ í•´ë…</a>
                        <a href="/u/tests/game-pathfinder/">ENFJ ë¦¬ë”ì‹­ ê²½ë¡œ íƒìƒ‰</a>
                    </div>
                </div>
            </nav>
            <button id="theme-switcher" class="theme-switcher">ğŸŒ™</button>
            <button id="hamburger" class="hamburger">â˜°</button>
        </div>
    </header>

    <div class="container">
        <h1>ì˜¤ëŠ˜ì˜ ENFJ ìš´ì„¸</h1>
        <div id="fortuneContent">
            <div class="card info-card">
                <div class="card-title"><span class="icon">ğŸ’¡</span> ì˜¤ëŠ˜ì˜ ì¡°ì–¸</div>
                <p id="adviceDisplay">ì¡°ì–¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <div class="card info-card">
                <div class="card-title"><span class="icon">ğŸ“</span> ì˜¤ëŠ˜ì˜ ê³¼ì œ</div>
                <p id="taskDisplay">ê³¼ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <div class="card info-card">
                <div class="card-title"><span class="icon">ğŸ“ˆ</span> INTP ì§€ìˆ˜</div>
                <p id="intpIndexDisplay">INTP ì§€ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <div class="card info-card">
                <div class="card-title"><span class="icon">ğŸ”‘</span> í–‰ìš´ì˜ í‚¤ì›Œë“œ</div>
                <p id="keywordDisplay">í‚¤ì›Œë“œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
        </div>
    </div>

    <script src="/assets/js/main.js" defer></script>
    <script>
    function getDailySeed() {
        const today = new Date();
        return today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
    }

    function mulberry32(seed) {
        return function() {
            seed |= 0;
            seed = seed + 0x6D2B79F5 | 0;
            let t = Math.imul(seed ^ seed >>> 15, 1 | seed);
            t = t + Math.imul(t ^ t >>> 7, 61 | t) | 0;
            return ((t ^ t >>> 14) >>> 0) / 4294967296;
        }
    }

    /**
     * í•œêµ­ì–´ ì¡°ì‚¬(e.g., ì€/ëŠ”, ì„/ë¥¼)ë¥¼ ì• ë‹¨ì–´ì˜ ë°›ì¹¨ ìœ ë¬´ì— ë”°ë¼ ì˜¬ë°”ë¥´ê²Œ ì„ íƒí•˜ëŠ” í•¨ìˆ˜
     * @param {string} text - ì¡°ì‚¬ê°€ ë¶™ì„ ë‹¨ì–´
     * @param {string} particle - '/'ë¡œ êµ¬ë¶„ëœ ì¡°ì‚¬ ìŒ (ì˜ˆ: "ì„/ë¥¼")
     * @returns {string} - ì„ íƒëœ ì¡°ì‚¬
     */
    function josa(text, particle) {
        const particles = particle.split('/');
        if (particles.length < 2) return particle;

        if (typeof text !== 'string' || text.length === 0) return particles[1];
        const lastChar = text[text.length - 1];
        const charCode = lastChar.charCodeAt(0);

        // í•œê¸€ (ê°€-í£) ë²”ìœ„ ì²´í¬
        if (charCode < 0xAC00 || charCode > 0xD7A3) {
            // í•œê¸€ì´ ì•„ë‹ˆë©´ ê¸°ë³¸ê°’(ë°›ì¹¨ ì—†ëŠ” ê²½ìš°) ë°˜í™˜
            return particles[1];
        }

        const hasBatchim = (charCode - 0xAC00) % 28 > 0;
        return hasBatchim ? particles[0] : particles[1];
    }

    // --- Enhanced Generative Data Parts ---
    const data = {
        advice: {
            openings: ["ì˜¤ëŠ˜ì€", "ì˜¤ëŠ˜ ë‹¹ì‹ ì˜", "ì§€ê¸ˆì€", "ì˜¤ëŠ˜ì€ íŠ¹ë³„íˆ"],
            subjects: ["íƒ€ì¸ê³¼ì˜ ê³µê° ëŠ¥ë ¥ì´", "ì˜ê°ì„ ì£¼ëŠ” ë¦¬ë”ì‹­ì´", "ë”°ëœ»í•œ ì˜í–¥ë ¥ì´", "ì‚¬ëŒë“¤ì„ ë•ê³ ì í•˜ëŠ” ë§ˆìŒì´", "ê¸ì •ì ì¸ ë³€í™”ë¥¼ ë§Œë“¤ë ¤ëŠ” ì˜ì§€ê°€", "ì¡°í™”ë¡œìš´ ê´€ê³„ë¥¼ êµ¬ì¶•í•˜ëŠ” ëŠ¥ë ¥ì´"],
            verbs: ["ë¹›ì„ ë°œí•˜ëŠ” ë‚ ì…ë‹ˆë‹¤.", "ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ê°€ì ¸ì˜¬ ê²ƒì…ë‹ˆë‹¤.", "ì£¼ë³€ì— ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì „íŒŒí•©ë‹ˆë‹¤.", "ë‹¹ì‹ ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì‚¬ëŒë“¤ì„ ëª¨ì„ ê²ƒì…ë‹ˆë‹¤.", "ì˜ë¯¸ ìˆëŠ” ì„±ê³¼ë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤."],
            connectors: ["ë”°ë¼ì„œ", "ê·¸ëŸ¬ë‹ˆ", "ì´ ê¸°íšŒë¥¼ ë¹Œì–´", "ë§ì„¤ì´ì§€ ë§ê³ "],
            actions: ["ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ë¨¼ì € ë‹¤ê°€ê°€ ì§„ì‹¬ì„ í‘œí˜„í•´ ë³´ì„¸ìš”.", "ë‹¹ì‹ ì˜ ë¹„ì „ì„ ê³µìœ í•˜ê³  í•¨ê»˜í•  ì‚¬ëŒë“¤ì„ ë…ë ¤í•´ ë³´ì„¸ìš”.", "ê°ˆë“± ìƒí™©ì—ì„œ ì¤‘ì¬ì ì—­í• ì„ ìì²˜í•´ ë³´ì„¸ìš”.", "ëˆ„êµ°ê°€ì˜ ê³ ë¯¼ì„ ë“¤ì–´ì£¼ê³  ì§„ì‹¬ ì–´ë¦° ì¡°ì–¸ì„ ê±´ë„¤ë³´ì„¸ìš”.", "ë‹¹ì‹ ì˜ ì—´ì •ìœ¼ë¡œ ì£¼ë³€ì„ ë°íˆëŠ” í™œë™ì— ì°¸ì—¬í•´ ë³´ì„¸ìš”.", "íŒ€ì›ë“¤ì˜ ê°•ì ì„ íŒŒì•…í•˜ê³  ì‹œë„ˆì§€ë¥¼ ì´ëŒì–´ë‚´ ë³´ì„¸ìš”."]
        },
        task: {
            types: ["ê³„íší•˜ê¸°:", "ì¡°ì§í•˜ê¸°:", "ì†Œí†µí•˜ê¸°:", "ì˜í–¥ì£¼ê¸°:"],
            actions: ["ì˜¤ë«ë™ì•ˆ ë¯¸ë¤„ì™”ë˜", "ìƒˆë¡­ê²Œ ì‹œë„í•˜ê³  ì‹¶ì€", "ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í• ", "ê°œì„ ì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ”"],
            subjects: ["ëª¨ì„ì´ë‚˜ í–‰ì‚¬", "ë´‰ì‚¬ í™œë™", "íŒ€ í”„ë¡œì íŠ¸", "ì‚¬íšŒì  ì´ìŠˆ", "ê°œì¸ì ì¸ ëª©í‘œ", "ê´€ê³„ ê°œì„  ë°©ì•ˆ"],
            verbs: ["ì„(ë¥¼) ìœ„í•œ êµ¬ì²´ì ì¸ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.", "ì˜ ì—­í• ì„ ë¶„ë‹´í•˜ê³  ì‹¤í–‰ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.", "ì— ëŒ€í•´ ê¸ì •ì ì¸ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•´ ë³´ì„¸ìš”.", "ê³¼/ì™€ ê´€ë ¨ëœ ì‚¬ëŒë“¤ì˜ ì˜ê²¬ì„ ê²½ì²­í•˜ê³  ì¡°ìœ¨í•´ ë³´ì„¸ìš”.", "ì˜ ì„±ê³µì„ ìœ„í•´ í•„ìš”í•œ ìì›ì„ ì—°ê²°í•´ ë³´ì„¸ìš”."]
        },
        enfjIndex: { // Changed from intpIndex
            reasons: ["íƒ€ì¸ê³¼ì˜ ê¹Šì€ ìœ ëŒ€ê°ì´ í˜•ì„±ë˜ì–´", "ì˜ê°ì„ ì£¼ëŠ” ë¦¬ë”ì‹­ì´ ë°œíœ˜ë˜ì–´", "ê¸ì •ì ì¸ ì˜í–¥ë ¥ì´ ì£¼ë³€ì— í™•ì‚°ë˜ì–´", "ì‚¬ëŒë“¤ì˜ ë§ˆìŒì„ ì›€ì§ì´ëŠ” ê³µê° ëŠ¥ë ¥ì´ ìµœê³ ì¡°ì— ë‹¬í•´", "ì¡°í™”ë¡œìš´ ê´€ê³„ ì†ì—ì„œ ì‹œë„ˆì§€ê°€ ì°½ì¶œë˜ì–´"],
            results: ["ì‚¬íšŒì  ì„±ì·¨ê°ì´ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤.", "ìƒˆë¡œìš´ í˜‘ë ¥ ê´€ê³„ë¥¼ êµ¬ì¶•í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.", "ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ í° ì§€ì§€ì™€ ì¡´ê²½ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", "ì˜ë¯¸ ìˆëŠ” ë³€í™”ë¥¼ ì´ëŒì–´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."]
        },
        keywords: ["ê³µê°", "ë¦¬ë”ì‹­", "ì¡°í™”", "ì˜ê°", "ì†Œí†µ", "ì‚¬íšŒì ", "ì˜í–¥ë ¥", "ë©˜í† ", "ì˜¹í˜¸ì", "ê³µë™ì²´", "ë¹„ì „", "ì—´ì •", "ì—°ê²°", "ê´€ê³„", "í˜‘ë ¥", "ë™ê¸°ë¶€ì—¬", "ì„¤ë“", "í‘œí˜„", "ì§€ì§€", "ì„±ì¥"]
    };

    // --- Generator Functions ---
    function generateAdvice(randFn, parts) {
        const pick = (arr) => arr[Math.floor(randFn() * arr.length)];
        
        const structureType = randFn();
        if (structureType < 0.4) {
            // Structure 1: Subject + Verb
            return `${pick(parts.subjects)} ${pick(parts.verbs)}`;
        } else if (structureType < 0.8) {
            // Structure 2: Opening + Subject + Verb
            return `${pick(parts.openings)} ${pick(parts.subjects)} ${pick(parts.verbs)}`;
        } else {
            // Structure 3: Full Sentence
            return `${pick(parts.openings)} ${pick(parts.subjects)} ${pick(parts.verbs)} ${pick(parts.connectors)} ${pick(parts.actions)}`;
        }
    }

    function generateTask(randFn, parts) {
        const pick = (arr) => arr[Math.floor(randFn() * arr.length)];
        
        const type = pick(parts.types);
        const action = pick(parts.actions);
        const subject = pick(parts.subjects);
        const verb = pick(parts.verbs);

        // ë¬¸ì¥ ì¡°í•©: action + subject + verb
        let rawSentence = `${action} ${subject}${verb}`;

        // ì¡°ì‚¬ ì²˜ë¦¬
        rawSentence = rawSentence
            .replace("ì„(ë¥¼)", josa(subject, "ì„/ë¥¼"))
            .replace("ì€(ëŠ”)", josa(subject, "ì€/ëŠ”"))
            .replace("ì´(ê°€)", josa(subject, "ì´/ê°€"))
            .replace("ê³¼/ì™€", josa(subject, "ê³¼/ì™€"));

        return `${type} ${rawSentence}`;
    }

    function generateIntpIndex(randFn, parts) {
        const pick = (arr) => arr[Math.floor(randFn() * arr.length)];
        const percentage = 65 + Math.floor(randFn() * 31); // 65% to 95%
        return `${percentage}% - ${pick(parts.reasons)} ${pick(parts.results)}`;
    }

    function generateKeywords(randFn, keywords, count) {
        const shuffled = [...keywords].sort(() => randFn() - 0.5);
        return shuffled.slice(0, count).map(k => `#${k}`).join(" ");
    }

    // --- Main Execution ---
    window.onload = function() {
        try {
            const seed = getDailySeed();
            const randFn = mulberry32(seed);

            document.getElementById('adviceDisplay').innerText = generateAdvice(randFn, data.advice);
            document.getElementById('taskDisplay').innerText = generateTask(randFn, data.task);
            document.getElementById('intpIndexDisplay').innerText = generateIntpIndex(randFn, data.intpIndex);
            document.getElementById('keywordDisplay').innerText = generateKeywords(randFn, data.keywords, 5);
        } catch (e) {
            console.error("ì˜¤ëŠ˜ì˜ ìš´ì„¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", e);
            document.getElementById('adviceDisplay').innerText = "ì½˜í…ì¸ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ ì£¼ì„¸ìš”.";
        }
    };
</script>
</body>
</html>